<!DOCTYPE html>
<html>
<head>
<title>Transaction History</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Bootstrap Icons -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

<style>
*{
margin:0;
padding:0;
box-sizing:border-box;
font-family:'Segoe UI',sans-serif;
}

body{
background:linear-gradient(135deg,#020617,#001f2e,#020617);
height:100vh;
display:flex;
justify-content:center;
align-items:center;
color:white;
}

/* Main box */
.box{
background:#0f172a;
padding:30px;
border-radius:18px;
width:900px;
max-width:95%;
box-shadow:0 0 45px rgba(0,255,255,0.35);
animation:fadeIn 0.8s ease;
}

/* Top */
.top{
display:flex;
justify-content:space-between;
align-items:center;
margin-bottom:15px;
}

.back{
cursor:pointer;
color:#00e5ff;
font-weight:600;
font-size:15px;
transition:.3s;
}

.back:hover{
color:white;
}

/* Heading */
h2{
text-align:center;
margin-bottom:20px;
color:#00ffff;
letter-spacing:1px;
}

h2 i{
margin-right:8px;
}

/* Table */
table{
width:100%;
border-collapse:collapse;
margin-top:10px;
background:#020617;
border-radius:12px;
overflow:hidden;
}

th{
color:#00ffff;
padding:16px;
background:#020617;
font-size:15px;
}

td{
padding:14px;
text-align:center;
border-bottom:1px solid rgba(255,255,255,0.08);
}

tr:hover{
background:#020c1b;
}

.amount{
color:#00ffcc;
font-weight:bold;
font-size:16px;
}

/* Status messages */
.status{
text-align:center;
margin-top:15px;
font-size:15px;
font-weight:500;
}

.success{
color:#00ffae;
}

.error{
color:#ff4d4d;
}

.empty{
color:orange;
}

/* Animation */
@keyframes fadeIn{
from{opacity:0;transform:translateY(20px);}
to{opacity:1;transform:translateY(0);}
}
</style>
</head>

<body>

<div class="box">

<div class="top">
<div class="back" onclick="location.href='dashboard.html'">
<i class="bi bi-arrow-left-circle-fill"></i> Back to Dashboard
</div>
</div>

<h2><i class="bi bi-clock-history"></i> Transaction History</h2>

<table>
<thead>
<tr>
<th><i class="bi bi-person-circle"></i> From Account</th>
<th><i class="bi bi-person-check-fill"></i> To Account</th>
<th><i class="bi bi-currency-rupee"></i> Amount</th>
<th><i class="bi bi-calendar-event"></i> Date</th>
</tr>
</thead>

<tbody id="data">
<tr><td colspan="4">Loading transactions...</td></tr>
</tbody>
</table>

<div class="status" id="statusMsg"></div>

</div>

<script>

// Fetch transactions from backend
fetch("http://localhost:8080/bank/transactions")
.then(res => res.json())
.then(list => {

let rows="";

list.forEach(t=>{
rows += `
<tr>
<td>
<i class="bi bi-arrow-up-circle" style="color:#f87171"></i> 
${t.fromAcc}
</td>

<td>
<i class="bi bi-arrow-down-circle" style="color:#34d399"></i> 
${t.toAcc}
</td>

<td class="amount">
<i class="bi bi-currency-rupee" style="color:#00ffcc"></i> 
${t.amount}
</td>

<td>
<i class="bi bi-clock"></i> 
${t.date ? t.date : "Just now"}
</td>
</tr>`;
});

if(rows===""){
rows="<tr><td colspan='4' class='empty'><i class='bi bi-exclamation-circle'></i> No transactions found</td></tr>";
}

document.getElementById("data").innerHTML = rows;

document.getElementById("statusMsg").innerHTML =
"<span class='success'><i class='bi bi-check-circle-fill'></i> Transactions loaded successfully</span>";

})
.catch(err=>{
document.getElementById("data").innerHTML =
"<tr><td colspan='4' class='error'><i class='bi bi-server'></i> Server error loading transactions</td></tr>";

document.getElementById("statusMsg").innerHTML =
"<span class='error'><i class='bi bi-x-circle-fill'></i> Backend not running</span>";
});
</script>

</body>
</html>

